import React, { useRef } from 'react';
import { Editor } from '@tinymce/tinymce-react';

const boldIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.85709 18.625C8.43531 18.625 8.07666 18.4772 7.78114 18.1817C7.48564 17.8862 7.33789 17.5275 7.33789 17.1058V6.8942C7.33789 6.47242 7.48564 6.11377 7.78114 5.81825C8.07666 5.52275 8.43531 5.375 8.85709 5.375H12.1994C13.2186 5.375 14.1401 5.69231 14.9638 6.32693C15.7875 6.96154 16.1994 7.81603 16.1994 8.89038C16.1994 9.63779 16.0189 10.2471 15.658 10.7183C15.2971 11.1894 14.9083 11.5314 14.4917 11.7442C15.0045 11.9211 15.4942 12.2708 15.9609 12.7933C16.4276 13.3157 16.6609 14.0192 16.6609 14.9038C16.6609 16.182 16.1897 17.1217 15.2474 17.723C14.3051 18.3243 13.3558 18.625 12.3994 18.625H8.85709ZM9.48782 16.6327H12.3186C13.1058 16.6327 13.6622 16.4141 13.9879 15.9769C14.3135 15.5397 14.4763 15.1205 14.4763 14.7192C14.4763 14.3179 14.3135 13.8987 13.9879 13.4615C13.6622 13.0243 13.0904 12.8057 12.2725 12.8057H9.48782V16.6327ZM9.48782 10.875H12.0821C12.6898 10.875 13.1715 10.7013 13.5273 10.3539C13.8831 10.0064 14.061 9.59037 14.061 9.10575C14.061 8.59035 13.8728 8.16918 13.4965 7.84225C13.1202 7.51533 12.659 7.35188 12.1128 7.35188H9.48782V10.875Z" fill="#8F95B2"/>
</svg>`;

const italicIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.29836 18.625C6.04529 18.625 5.83139 18.5375 5.65666 18.3626C5.48191 18.1877 5.39453 17.9736 5.39453 17.7203C5.39453 17.467 5.48191 17.2532 5.65666 17.0788C5.83139 16.9045 6.04529 16.8173 6.29836 16.8173H9.21183L12.4522 7.18265H9.53876C9.28569 7.18265 9.07179 7.0952 8.89706 6.9203C8.72231 6.7454 8.63493 6.5313 8.63493 6.278C8.63493 6.02472 8.72231 5.81089 8.89706 5.63652C9.07179 5.46217 9.28569 5.375 9.53876 5.375H16.8849C17.138 5.375 17.3519 5.46245 17.5266 5.63735C17.7014 5.81225 17.7887 6.02634 17.7887 6.27962C17.7887 6.53293 17.7014 6.74676 17.5266 6.92113C17.3519 7.09548 17.138 7.18265 16.8849 7.18265H14.2791L11.0387 16.8173H13.6445C13.8976 16.8173 14.1115 16.9048 14.2862 17.0797C14.461 17.2546 14.5483 17.4687 14.5483 17.722C14.5483 17.9752 14.461 18.1891 14.2862 18.3634C14.1115 18.5378 13.8976 18.625 13.6445 18.625H6.29836Z" fill="#8F95B2"/>
</svg>`;

const underlineIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.09568 20.1255C5.88319 20.1255 5.70508 20.0536 5.56133 19.9098C5.41758 19.766 5.3457 19.5878 5.3457 19.3752C5.3457 19.1626 5.41758 18.9845 5.56133 18.8409C5.70508 18.6973 5.88319 18.6255 6.09568 18.6255H17.9034C18.1159 18.6255 18.294 18.6974 18.4377 18.8413C18.5815 18.9851 18.6534 19.1633 18.6534 19.3759C18.6534 19.5884 18.5815 19.7665 18.4377 19.9101C18.294 20.0537 18.1159 20.1255 17.9034 20.1255H6.09568ZM11.9995 16.5294C10.4444 16.5294 9.23064 16.0573 8.3582 15.113C7.48577 14.1688 7.04955 12.9038 7.04955 11.3179V4.33326C7.04955 4.08093 7.14265 3.86465 7.32885 3.68441C7.51504 3.50418 7.73425 3.41406 7.9865 3.41406C8.23877 3.41406 8.45464 3.50418 8.63413 3.68441C8.81361 3.86465 8.90335 4.08093 8.90335 4.33326V11.4102C8.90335 12.4204 9.17194 13.2301 9.70913 13.839C10.2463 14.448 11.0098 14.7525 11.9995 14.7525C12.9893 14.7525 13.7527 14.448 14.2899 13.839C14.8271 13.2301 15.0957 12.4204 15.0957 11.4102V4.33326C15.0957 4.08093 15.1888 3.86465 15.375 3.68441C15.5612 3.50418 15.7804 3.41406 16.0327 3.41406C16.2849 3.41406 16.5008 3.50418 16.6803 3.68441C16.8598 3.86465 16.9495 4.08093 16.9495 4.33326V11.3179C16.9495 12.9038 16.5133 14.1688 15.6409 15.113C14.7684 16.0573 13.5546 16.5294 11.9995 16.5294Z" fill="#8F95B2"/>
</svg>`;

const bullistIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.0577 18.7493C9.84518 18.7493 9.66705 18.6774 9.5233 18.5336C9.37957 18.3898 9.3077 18.2116 9.3077 17.999C9.3077 17.7864 9.37957 17.6083 9.5233 17.4648C9.66705 17.3212 9.84518 17.2494 10.0577 17.2494H19.75C19.9625 17.2494 20.1406 17.3213 20.2843 17.4651C20.4281 17.6089 20.5 17.7871 20.5 17.9997C20.5 18.2123 20.4281 18.3904 20.2843 18.534C20.1406 18.6775 19.9625 18.7493 19.75 18.7493H10.0577ZM10.0577 12.7493C9.84518 12.7493 9.66705 12.6774 9.5233 12.5336C9.37957 12.3898 9.3077 12.2116 9.3077 11.999C9.3077 11.7864 9.37957 11.6083 9.5233 11.4648C9.66705 11.3212 9.84518 11.2494 10.0577 11.2494H19.75C19.9625 11.2494 20.1406 11.3213 20.2843 11.4651C20.4281 11.6089 20.5 11.7871 20.5 11.9997C20.5 12.2123 20.4281 12.3904 20.2843 12.534C20.1406 12.6775 19.9625 12.7493 19.75 12.7493H10.0577ZM10.0577 6.74934C9.84518 6.74934 9.66705 6.67744 9.5233 6.53364C9.37957 6.38982 9.3077 6.21162 9.3077 5.99904C9.3077 5.78644 9.37957 5.60835 9.5233 5.46476C9.66705 5.32118 9.84518 5.24939 10.0577 5.24939H19.75C19.9625 5.24939 20.1406 5.32129 20.2843 5.46509C20.4281 5.6089 20.5 5.7871 20.5 5.99969C20.5 6.21229 20.4281 6.39038 20.2843 6.53396C20.1406 6.67754 19.9625 6.74934 19.75 6.74934H10.0577ZM5.16345 19.6628C4.706 19.6628 4.3144 19.4999 3.98865 19.1742C3.66288 18.8484 3.5 18.4568 3.5 17.9994C3.5 17.5419 3.66288 17.1503 3.98865 16.8246C4.3144 16.4988 4.706 16.3359 5.16345 16.3359C5.6209 16.3359 6.0125 16.4988 6.33825 16.8246C6.664 17.1503 6.82687 17.5419 6.82687 17.9994C6.82687 18.4568 6.664 18.8484 6.33825 19.1742C6.0125 19.4999 5.6209 19.6628 5.16345 19.6628ZM5.16345 13.6628C4.706 13.6628 4.3144 13.4999 3.98865 13.1742C3.66288 12.8484 3.5 12.4568 3.5 11.9994C3.5 11.5419 3.66288 11.1503 3.98865 10.8246C4.3144 10.4988 4.706 10.3359 5.16345 10.3359C5.6209 10.3359 6.0125 10.4988 6.33825 10.8246C6.664 11.1503 6.82687 11.5419 6.82687 11.9994C6.82687 12.4568 6.664 12.8484 6.33825 13.1742C6.0125 13.4999 5.6209 13.6628 5.16345 13.6628ZM5.16345 7.66279C4.706 7.66279 4.3144 7.49991 3.98865 7.17416C3.66288 6.84841 3.5 6.45681 3.5 5.99936C3.5 5.54191 3.66288 5.15031 3.98865 4.82456C4.3144 4.49881 4.706 4.33594 5.16345 4.33594C5.6209 4.33594 6.0125 4.49881 6.33825 4.82456C6.664 5.15031 6.82687 5.54191 6.82687 5.99936C6.82687 6.45681 6.664 6.84841 6.33825 7.17416C6.0125 7.49991 5.6209 7.66279 5.16345 7.66279Z" fill="#8F95B2"/>
</svg>`;

const tinyMceEditor: React.FC = () => {
  const editorRef = useRef<any>(null);

  const tinymcePlugins = ['link', 'lists', 'autoresize', 'media', 'quickbars'];
  const tinymceToolbar =
    'customBold customItalic customUnderline |' +
    'blocks customBullist numlist |' +
    'alignleft |' +
    'quickimage media link';

  return (
    <Editor
      apiKey={process.env.NEXT_PUBLIC_TINYMCE_API_KEY}
      onInit={(evt, editor) => (editorRef.current = editor)}
      init={{
        plugins: tinymcePlugins,
        toolbar: tinymceToolbar,
        min_height: 500,
        menubar: false,
        branding: false,
        statusbar: false,
        block_formats: '제목1=h2;제목2=h3;제목3=h4;내용=p;',
        setup: (editor) => {
          editor.ui.registry.addIcon('customBold', boldIcon);
          editor.ui.registry.addIcon('customItalic', italicIcon);
          editor.ui.registry.addIcon('customUnderline', underlineIcon);
          editor.ui.registry.addIcon('customBullist', bullistIcon);

          editor.ui.registry.addButton('customBold', {
            icon: 'customBold',
            tooltip: 'Bold',
            onAction: () => editor.execCommand('Bold'),
          });

          editor.ui.registry.addButton('customItalic', {
            icon: 'customItalic',
            tooltip: 'Italic',
            onAction: () => editor.execCommand('Italic'),
          });

          editor.ui.registry.addButton('customUnderline', {
            icon: 'customUnderline',
            tooltip: 'underline',
            onAction: () => editor.execCommand('underline'),
          });

          editor.ui.registry.addButton('customBullist', {
            icon: 'customBullist',
            tooltip: 'bullist',
            onAction: () => editor.execCommand('bullist'),
          });
        },
      }}
    />
  );
};

export default tinyMceEditor;
